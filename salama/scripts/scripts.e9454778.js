"use strict";function routeProvider(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/evaluation",{templateUrl:"views/evaluation.html",controller:"EvaluationCtrl",controllerAs:"evaluation"}).when("/library",{templateUrl:"views/library.html",controller:"LibraryCtrl",controllerAs:"library"}).when("/article",{templateUrl:"views/article.html",controller:"ArticleCtrl",controllerAs:"article"}).when("/individuals",{templateUrl:"views/individuals.html",controller:"IndividualsCtrl",controllerAs:"individuals"}).when("/organizations",{templateUrl:"views/organizations.html",controller:"OrganizationsCtrl",controllerAs:"organizations"}).when("/advice",{templateUrl:"views/advice.html",controller:"AdviceCtrl",controllerAs:"advice"}).otherwise({redirectTo:"/"})}function translateProvider(a){a.useStaticFilesLoader({prefix:"resources/locale-",suffix:".json"}),a.preferredLanguage("en_US"),a.useLocalStorage()}function markdownProvider(a){a.setOptions({gfm:!0})}angular.module("salamaApp",["ngAnimate","ngAria","ngCookies","ngRoute","ngSanitize","ngMaterial","pascalprecht.translate","hc.marked","ngStorage"]).config(routeProvider).config(translateProvider).config(markdownProvider),routeProvider.$inject=["$routeProvider"],translateProvider.$inject=["$translateProvider"],markdownProvider.$inject=["markedProvider"],function(){function a(a,b){function c(b){e.showLangOptions=!e.showLangOptions,a.use(b)}function d(){b.changeState()}var e=this;e.showLangOptions=!1,e.changeLang=c,e.changeStateSide=d}angular.module("salamaApp").controller("HeaderCtrl",a),a.$inject=["$translate","navsideService"]}(),function(){function a(a){function b(){a.changeState()}var c=this;c.changeStateSide=b}angular.module("salamaApp").controller("HomeCtrl",a),a.$inject=["navsideService"]}(),function(){function a(){}angular.module("salamaApp").controller("EvaluationCtrl",a),a.$inject=[]}(),function(){function a(a,b){function c(){a.$watch(d,e)}function d(){return b.getSelected()}function e(){b.getPost().then(f)["catch"](g)}function f(a){h.article=a}function g(a){console.error(a)}var h=this;h.article=null,c()}angular.module("salamaApp").controller("ArticleCtrl",a),a.$inject=["$scope","postsService"]}(),function(){function a(a,b,c,d){function e(){a.$watch(f,g)}function f(){return b.use()}function g(a){d.setLang(a),c.getIndividuals(a).then(h)["catch"](k)}function h(a){l.questions=a}function i(){var a=(l.evaluation[0],l.evaluation[1],l.evaluation[2],l.evaluation[3],l.evaluation[4],l.evaluation[5],Number(l.evaluation[6])),b=Number(l.evaluation[7]),c=Number(l.evaluation[8]),e=j(l.evaluation[9]),f=j(l.evaluation[10]),g=j(l.evaluation[11]),h=j(l.evaluation[12]),i=j(l.evaluation[13]),k=j(l.evaluation[14]),m=a+b+c+e+f+g+h+i+k;m=m||40,d.setScore(m)}function j(a){var b=0;for(var c in a)b+=Number(a[c]);return b}function k(a){console.error(a)}var l=this;l.questions=[],l.evaluation={},l.calculate=i,e()}angular.module("salamaApp").controller("IndividualsCtrl",a),a.$inject=["$scope","$translate","questionsService","scoreService"]}(),angular.module("salamaApp").controller("OrganizationsCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),function(){function a(a,b){function c(){return i(k)}function d(a){var b=l+"locale-"+a+".json";return i(b)}function e(a){var b=m+a;return i(b).then(function(a){return a=a.replace(/^---(.|\s)*?---/,""),a=a.replace(/{{site.baseurl}}/,j)})}function f(a){var b=n+a+"/individuals.json";return i(b).then(function(a){return a.questions})}function g(a){var b=n+a+"/organizations.json";return i(b).then(function(a){return a.questions})}function h(a,b){var c=o+b+"/"+a+".md";return i(c)}function i(c){var d=a.defer();return b.get(c).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise}var j="https://raw.githubusercontent.com/spaceship-labs/salama-content/gh-pages/",k=j+"version.txt",l=j+"metadata/",m=j+"posts/",n=j+"questions/",o=j+"advices/";return{getVersion:c,getMetadata:d,getPost:e,getEvalIndividuals:f,getEvalOrganizations:g,getAdvice:h}}angular.module("salamaApp").factory("contentService",a),a.$inject=["$q","$http"]}(),function(){function a(a,b){function c(a){return j(a),b.getVersion().then(e).then(f)}function d(a){return j(a),b.getVersion().then(e).then(g)}function e(a){return a!=k.version?(k.version=a,!0):!1}function f(a){return!k.individuals[k.lang]||a?b.getEvalIndividuals(k.lang).then(h):k.individuals[k.lang]}function g(a){return!k.organizations[k.lang]||a?b.getEvalOrganizations(k.lang).then(i):k.organizations[k.lang]}function h(a){return k.individuals[k.lang]=a,a}function i(a){return k.organizations[k.lang]=a,a}function j(a){k.lang=a}var k=a.questions=a.questions||{};return k.individuals=k.individuals||{},k.organizations=k.organizations||{},k.version=k.version||"",k.lang=k.lang||"en_US",{getIndividuals:c,getOrganizations:d}}angular.module("salamaApp").factory("questionsService",a),a.$inject=["$localStorage","contentService"]}(),function(){function a(){var a="<ng-include src=\"'views/questions/'+question.type+'.html'\"></ng-include>";return{template:a}}angular.module("salamaApp").directive("formQuestion",a)}(),function(){function a(a,b){function c(){return i.path}function d(a){i.path=a}function e(){return b.getVersion().then(f).then(g)}function f(a){return i.version!=a?(i.version=a,!0):!1}function g(a){return!i.post[i.path]||a?b.getPost(i.path).then(h):i.post[i.path]}function h(a){return i.post[i.path]=a,a}var i=a.post=a.post||{};return i.post=i.post||{},i.version=i.version||"",{getSelected:c,setSelected:d,getPost:e}}angular.module("salamaApp").factory("postsService",a),a.$inject=["$localStorage","contentService"]}(),function(){function a(a,b,c,d,e){function f(){a.$watch(h,i),a.$watch(j,k)}function g(){c.changeState()}function h(){return c.getState()}function i(a){o.show=a}function j(){return b.use()}function k(a){return d.getMetadata(a).then(l).then(m)}function l(a){var b=[];return a.forEach(function(a){var c=a.category;-1!=b.indexOf(c)||b.push(c)}),o.categories=b,a}function m(a){var b={};return a.forEach(function(a){var c=a.category;b[c]=b[c]||[],b[c].push(a)}),o.metadata=b,a}function n(a){g(),e.setSelected(a)}var o=this;o.show=!1,o.categories=[],o.metadata={},o.changeStateSide=g,o.setPost=n,f()}angular.module("salamaApp").controller("NavsideCtrl",a),a.$inject=["$scope","$translate","navsideService","metadataService","postsService"]}(),function(){function a(){function a(){c=!c}function b(){return c}var c=!1;return{changeState:a,getState:b}}angular.module("salamaApp").factory("navsideService",a),a.$inject=[]}(),function(){function a(a,b){function c(a){return g(a),b.getVersion().then(d).then(e)}function d(a){return h.version!=a?(h.version=a,!0):!1}function e(a){return!h.metadata[h.lang]||a?b.getMetadata(h.lang).then(f):h.metadata[h.lang]}function f(a){return h.metadata=a,a}function g(a){h.lang=a}var h=a.metadata=a.metadata||{};return h.metadata=h.metadata||{},h.version=h.version||"",h.lang=h.lang||"en_US",{getMetadata:c}}angular.module("salamaApp").service("metadataService",a),a.$inject=["$localStorage","contentService"]}(),function(){function a(a,b){function c(){var a=j.score;return 40>=a?"low":59>=a?"mid":79>=a?"high":"extreme"}function d(){return b.getVersion().then(e).then(f)}function e(a){return j.version!=a?(j.version=a,!0):!1}function f(a){var d=c(j.score),e=j.lang;return j.advices[e]&&j.advices[e][d]&&!a?j.advices[e][d]:b.getAdvice(d,e).then(g)}function g(a){return j.advices[j.lang]=j.advices[j.lang]||{},j.advices[j.lang][j.risk]=a,a}function h(a){j.lang=a}function i(a){j.score=a}var j=a.score=a.score||{};return j.lang=j.lang||"en_US",j.advices=j.advices||{},j.score=j.score||0,{setScore:i,setLang:h,getRiskLevel:c,getAdvice:d}}angular.module("salamaApp").factory("scoreService",a),a.$inject=["$localStorage","contentService"]}(),function(){function a(a){function b(){a.getAdvice().then(c)}function c(a){d.advice=a}var d=this;d.advice="",b()}angular.module("salamaApp").controller("AdviceCtrl",a),a.$inject=["scoreService"]}(),angular.module("salamaApp").run(["$templateCache",function(a){a.put("views/advice.html",'<md-content layout layout-align="center start" class="content-home"> <div flex="80"> <div marked="advice.advice" class="article"> </div> </div> </md-content>'),a.put("views/article.html",'<md-content layout layout-align="center start" class="content-home"> <div flex="80"> <div marked="article.article" class="article"> </div> </div> </md-content>'),a.put("views/evaluation.html",'<md-content layout layout-align="center center" class="content-instructions"> <div layout="column" class="instructions"> <div class="container"> <h1 class="center">Lorem Ipsum Dolor Sit Amet</h1> <p class="center">oijsd foiasj dpfoisj dfoiajs dfpoaisj doaisdj</p> <div class="steps" layout layout-margin layout-xs="column" layout-align="space-around center"> <div flex="33" flex-xs="100"> <div> <img src="images/icon_step1.3eb78fd5.png"> </div> <h3>Choose<sup>1</sup></h3> <p>oijsd foiasj dpfoisj dfoiajs dfpoaisj doaisdj</p> </div> <div flex="33" flex-xs="100"> <div> <img src="images/icon_step2.8510068e.png"> </div> <h3>Response<sup>2</sup></h3> <p>oijsd foiasj dpfoisj dfoiajs dfpoaisj doaisdj</p> </div> <div flex="33" flex-xs="100"> <div> <img src="images/icon_step3.75f0ab6b.png"> </div> <h3>Results & Stadistics<sup>3</sup></h3> <p>oijsd foiasj dpfoisj dfoiajs dfpoaisj doaisdj</p> </div> </div> </div> </div> </md-content> <md-tabs md-dynamic-height md-border-bottom md-center-tabs md-no-ink-bar md-no-ink> <md-tab label="1"> <md-content class="content-evaluation" layout layout-align="center center"> <div class="evaluation container" layout="column" layout-align="center center"> <h1 class="center"><strong>Get involved.</strong> Choose a category to start your evaluation.</h1> <div class="evaluation-options" layout="row" layout-align="space-around center" layout-xs="column"> <div class="categories relative" flex="40" flex-xs="100" layout="column" layout-align="center"> <div class="iconWrapper"> <i class="icon-user"></i> <div class="square"></div> </div> <div> <h3>Individual Journalist</h3> <p>oijsd foiasj dpfoisj dfoiajs dfpoaisj doaisdj f</p> </div> <a class="absoluteLink" href="#/individuals"></a> </div> <div class="categories relative" flex="40" flex-xs="100" layout="column" layout-align="center"> <div class="iconWrapper"> <i class="icon-users"></i> <div class="square"></div> </div> <div> <h3>Organization</h3> <p>oijsd foiasj dpfoisj dfoiajs dfpoaisj doaisdj f</p> </div> <a class="absoluteLink" href="#/organizations"></a> </div> </div> </div> </md-content> </md-tab> <md-tab label="2"> </md-tab> <md-tab label="3"> </md-tab> </md-tabs>'),a.put("views/home.html",'<md-content layout layout-align="center center" class="content-home"> <div layout="column" flex="100" flex-md="80" flex-gt-md="50" class="home"> <div class="home-logo" flex> <!-- <h1>Salama <h1> --> <img src="images/logo_salama.d82fb002.png"> </div> <div class="home-description" flex> <h2>Lorem Ipsum Dolor Sit Amet</h2> <p>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</p> </div> <div layout="row" layout-align="space-around center" layout-wrap class="home-choices"> <md-button class="" ng-href="#/evaluation" flex="45" flex-xs="90" class="button-choice"> <span translate>views.home.evaluation</span> </md-button> <md-button class="" ng-href="" ng-click="home.changeStateSide()" flex="45" flex-xs="90" class="button-choice"> <span translate>views.home.library</span> </md-button> </div> </div> </md-content>'),a.put("views/individuals.html",'<md-content> <form layout="column" layout-padding flex-sm="100" flex-gt-sm="80" ng-submit="individuals.calculate()"> <form-question ng-repeat="question in individuals.questions"> </form-question> <md-button ng-href="#/advice" ng-click="individuals.calculate()" type="submit"> Submit</md-button> </form> </md-content>'),a.put("views/organizations.html","<p>This is the organizations view.</p>"),a.put("views/questions/checkbox.html",'<span>{{question.instruction}}</span> <p>{{question.question}}</p> <div layout="column" flex="100"> <md-checkbox ng-repeat="option in question.options" ng-model="individuals.evaluation[$parent.$index][$index]" flex> {{option.option}} </md-checkbox> </div> <hr>'),a.put("views/questions/email.html",'<span>{{question.instruction}}</span> <div layout flex="100"> <md-input-container flex="100"> <label>{{question.question}}</label> <input type="email" required ng-model="individuals.evaluation[$index]"> </md-input-container> </div> <hr>'),a.put("views/questions/multiradio.html",'<span>{{question.instruction}}</span> <p>{{question.question}}</p> <div> <div layout flex="50" flex-offset="50" layout-wrap> <span ng-repeat="option in question.options[0].options" flex> {{option.option}} </span> </div> <div layout flex="100" layout-wrap ng-repeat="qoption in question.options"> <div flex="50"> {{qoption.question}} </div> <div flex="50"> <md-radio-group ng-model="individuals.evaluation[$parent.$index][$index]" layout> <md-radio-button ng-repeat="option in qoption.options" value="{{option.value}}" flex> </md-radio-button> </md-radio-group> <hr> </div> </div> </div> <hr>'),a.put("views/questions/radio.html",'<span>{{question.instruction}}</span> <p>{{question.question}}</p> <div layout flex="100"> <md-radio-group ng-model="individuals.evaluation[$index]" ng-required="true" flex="100"> <md-radio-button ng-repeat="option in question.options" value="{{option.value}}"> {{option.option}} </md-radio-button> </md-radio-group> </div> <hr>'),a.put("views/questions/text.html",'<span>{{question.instruction}}</span> <div layout flex="100"> <md-input-container flex="100"> <label>{{question.question}}</label> <input type="text" ng-model="individuals.evaluation[$index]" ng-required="$index!=0"> </md-input-container> </div> <hr>')}]);